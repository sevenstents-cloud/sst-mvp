(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,u)=>{t.exports=e.r(76562)},57951,e=>{"use strict";var t=e.i(43476),u=e.i(71645),s=e.i(7471),n=e.i(18566);let r=(0,u.createContext)({session:null,user:null,profile:null,isLoading:!0,is2FAVerified:!1,verify2FA:async()=>!1,signOut:async()=>{}});function a({children:e}){let[a,l]=(0,u.useState)(null),[i,o]=(0,u.useState)(null),[c,f]=(0,u.useState)(null),[h,d]=(0,u.useState)(!0),[p,b]=(0,u.useState)(!1),g=(0,n.useRouter)(),y=(0,n.usePathname)();async function v(e){try{let{data:t,error:u}=await s.supabase.from("usuarios").select("*").eq("id",e).single();u?console.error("Erro ao buscar perfil:",u):(f(t),t.two_factor_enabled||b(!0))}catch(e){console.error(e)}}async function A(e){return b(!0),!0}(0,u.useEffect)(()=>{let{data:{subscription:e}}=s.supabase.auth.onAuthStateChange(async(e,t)=>{l(t),o(t?.user??null),t?.user?await v(t.user.id):(f(null),b(!1)),d(!1)});return()=>e.unsubscribe()},[]),(0,u.useEffect)(()=>{if(h)return;let e="/login"===y;if(!a&&!e)return void g.push("/login");if(a){let t=c?.two_factor_enabled&&!p;e?t||g.push("/"):t&&g.push("/login")}},[a,h,y,c,p,g]);let S=async()=>{await s.supabase.auth.signOut(),b(!1),f(null),g.push("/login")};return(0,t.jsx)(r.Provider,{value:{session:a,user:i,profile:c,isLoading:h,is2FAVerified:p,verify2FA:A,signOut:S},children:!h&&e})}e.s(["AuthProvider",()=>a,"useAuth",0,()=>(0,u.useContext)(r)])}]);